{"ast":null,"code":"import _asyncToGenerator from \"D:\\\\miniProjet4twin-main\\\\miniProjet4twin-main\\\\miniprojet4\\\\node_modules\\\\@angular-devkit\\\\build-angular\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { EventEmitter } from '@angular/core';\nimport jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/session.service\";\nimport * as i2 from \"src/app/services/user.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\nexport class UserComponent {\n  constructor(session, us, fb) {\n    this.session = session;\n    this.us = us;\n    this.fb = fb;\n    this.notification = new EventEmitter();\n  }\n\n  ngOnInit() {\n    this.userForm = this.fb.group({\n      'badge': ['']\n    });\n  }\n\n  notifyParent() {\n    if (confirm(\"Confirmer la suppression de \" + this.user.prenom + \" \" + this.user.nom)) {\n      this.notification.emit(this.user);\n    }\n  }\n\n  updateRoleUser(f) {\n    this.user.badge = f.value.badge;\n    console.log(this.user);\n    let response = this.us.updateUser(this.user);\n    response.subscribe(data => {\n      console.log(this.user);\n    });\n  }\n\n  exportAsPDF(divId) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const data = document.getElementById('Mypdfuser');\n      html2canvas(data).then(canvas => {\n        const imgData = canvas.toDataURL('image/png');\n        const pdf = new jsPDF({\n          orientation: 'landscape'\n        });\n        const imgProps = pdf.getImageProperties(imgData);\n        const pdfWidth = pdf.internal.pageSize.getWidth();\n        const pdfHeight = imgProps.height * pdfWidth / imgProps.width;\n        pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);\n        pdf.save(_this.session.getUser().email + \"#\" + new Date().toString() + \".pdf\");\n      });\n    })();\n  }\n\n}\n\nUserComponent.ɵfac = function UserComponent_Factory(t) {\n  return new (t || UserComponent)(i0.ɵɵdirectiveInject(i1.SessionService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.FormBuilder));\n};\n\nUserComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: UserComponent,\n  selectors: [[\"app-user\"]],\n  inputs: {\n    user: \"user\"\n  },\n  outputs: {\n    notification: \"notification\"\n  },\n  decls: 33,\n  vars: 11,\n  consts: [[1, \"row\", \"align-items-center\", 2, \"border-bottom\", \"1px solid black\"], [1, \"col-4\"], [\"alt\", \"John\", 1, \"w-75\", 3, \"src\"], [\"id\", \"Mypdfuser\", 1, \"col-6\"], [1, \"w-25\", \"mx-auto\", \"user\", 3, \"formGroup\"], [1, \"form-group\"], [\"formControlName\", \"badge\"], [\"value\", \"Parent\"], [\"selected\", \"\", \"value\", \"Medecin\"], [1, \"col-2\"], [1, \"btn\", \"btn-danger\", \"my-2\", \"btn-user\", 3, \"disabled\", \"click\"], [1, \"btn\", \"btn-warning\", \"my-2\", \"btn-user\", 3, \"disabled\", \"click\"], [1, \"col-md-4\", \"text-right\"], [1, \"btn\", \"btn-success\", \"btn-block\", 3, \"click\"]],\n  template: function UserComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵelement(2, \"img\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 3)(4, \"h4\");\n      i0.ɵɵtext(5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"h4\");\n      i0.ɵɵtext(7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"h4\");\n      i0.ɵɵtext(9);\n      i0.ɵɵpipe(10, \"date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"h4\");\n      i0.ɵɵtext(12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"h4\");\n      i0.ɵɵtext(14);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"form\", 4)(16, \"div\", 5)(17, \"label\");\n      i0.ɵɵtext(18, \"Badge\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"select\", 6)(20, \"option\", 7);\n      i0.ɵɵtext(21, \"Parent\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"option\", 8);\n      i0.ɵɵtext(23, \"M\\u00E9decin\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(24, \"div\", 9)(25, \"button\", 10);\n      i0.ɵɵlistener(\"click\", function UserComponent_Template_button_click_25_listener() {\n        return ctx.notifyParent();\n      });\n      i0.ɵɵtext(26, \"Supprimer\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(27, \"div\", 9)(28, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function UserComponent_Template_button_click_28_listener() {\n        return ctx.updateRoleUser(ctx.userForm);\n      });\n      i0.ɵɵtext(29, \"Modfier Role\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(30, \"div\", 12)(31, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function UserComponent_Template_button_click_31_listener() {\n        return ctx.openPDF();\n      });\n      i0.ɵɵtext(32, \"Download PDF\");\n      i0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵpropertyInterpolate1(\"src\", \"assets/img/UserPictures/\", ctx.user.urlpicture, \"\", i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"Nom : \", ctx.user.nom, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Prenom : \", ctx.user.prenom, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Date de naissance : \", i0.ɵɵpipeBind1(10, 9, ctx.user.dateNaissance), \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"Email : \", ctx.user.email, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Badge : \", ctx.user.badge, \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.userForm);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"disabled\", ctx.user.badge === \"Moderateur\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", ctx.user.badge === \"Moderateur\");\n    }\n  },\n  directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.FormControlName, i3.NgSelectOption, i3.ɵNgSelectMultipleOption],\n  pipes: [i4.DatePipe],\n  styles: [\".btn-user[_ngcontent-%COMP%] {\\n    font-size: 0.8rem;\\n    border-radius: 10rem;\\n    padding: 0.75rem 1rem;\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGlCQUFpQjtJQUNqQixvQkFBb0I7SUFDcEIscUJBQXFCO0VBQ3ZCIiwiZmlsZSI6InVzZXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5idG4tdXNlciB7XG4gICAgZm9udC1zaXplOiAwLjhyZW07XG4gICAgYm9yZGVyLXJhZGl1czogMTByZW07XG4gICAgcGFkZGluZzogMC43NXJlbSAxcmVtO1xuICB9Il19 */\"]\n});","map":{"version":3,"sources":["D:/miniProjet4twin-main/miniProjet4twin-main/miniprojet4/src/app/users/user/user.component.ts"],"names":["EventEmitter","jsPDF","html2canvas","i0","i1","i2","i3","i4","UserComponent","constructor","session","us","fb","notification","ngOnInit","userForm","group","notifyParent","confirm","user","prenom","nom","emit","updateRoleUser","f","badge","value","console","log","response","updateUser","subscribe","data","exportAsPDF","divId","document","getElementById","then","canvas","imgData","toDataURL","pdf","orientation","imgProps","getImageProperties","pdfWidth","internal","pageSize","getWidth","pdfHeight","height","width","addImage","save","getUser","email","Date","toString","ɵfac","UserComponent_Factory","t","ɵɵdirectiveInject","SessionService","UserService","FormBuilder","ɵcmp","ɵɵdefineComponent","type","selectors","inputs","outputs","decls","vars","consts","template","UserComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵpipe","ɵɵlistener","UserComponent_Template_button_click_25_listener","UserComponent_Template_button_click_28_listener","UserComponent_Template_button_click_31_listener","openPDF","ɵɵadvance","ɵɵpropertyInterpolate1","urlpicture","ɵɵsanitizeUrl","ɵɵtextInterpolate1","ɵɵpipeBind1","dateNaissance","ɵɵproperty","directives","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","SelectControlValueAccessor","NgControlStatus","FormControlName","NgSelectOption","ɵNgSelectMultipleOption","pipes","DatePipe","styles"],"mappings":"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","sourcesContent":["import { EventEmitter } from '@angular/core';\r\nimport jsPDF from 'jspdf';\r\nimport html2canvas from 'html2canvas';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"../../services/session.service\";\r\nimport * as i2 from \"src/app/services/user.service\";\r\nimport * as i3 from \"@angular/forms\";\r\nimport * as i4 from \"@angular/common\";\r\nexport class UserComponent {\r\n    constructor(session, us, fb) {\r\n        this.session = session;\r\n        this.us = us;\r\n        this.fb = fb;\r\n        this.notification = new EventEmitter();\r\n    }\r\n    ngOnInit() {\r\n        this.userForm = this.fb.group({\r\n            'badge': [''],\r\n        });\r\n    }\r\n    notifyParent() {\r\n        if (confirm(\"Confirmer la suppression de \" + this.user.prenom + \" \" + this.user.nom)) {\r\n            this.notification.emit(this.user);\r\n        }\r\n    }\r\n    updateRoleUser(f) {\r\n        this.user.badge = f.value.badge;\r\n        console.log(this.user);\r\n        let response = this.us.updateUser(this.user);\r\n        response.subscribe((data) => {\r\n            console.log(this.user);\r\n        });\r\n    }\r\n    async exportAsPDF(divId) {\r\n        const data = document.getElementById('Mypdfuser');\r\n        html2canvas(data)\r\n            .then((canvas) => {\r\n            const imgData = canvas.toDataURL('image/png');\r\n            const pdf = new jsPDF({\r\n                orientation: 'landscape',\r\n            });\r\n            const imgProps = pdf.getImageProperties(imgData);\r\n            const pdfWidth = pdf.internal.pageSize.getWidth();\r\n            const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;\r\n            pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);\r\n            pdf.save(this.session.getUser().email + \"#\" + new Date().toString() + \".pdf\");\r\n        });\r\n    }\r\n}\r\nUserComponent.ɵfac = function UserComponent_Factory(t) { return new (t || UserComponent)(i0.ɵɵdirectiveInject(i1.SessionService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.FormBuilder)); };\r\nUserComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: UserComponent, selectors: [[\"app-user\"]], inputs: { user: \"user\" }, outputs: { notification: \"notification\" }, decls: 33, vars: 11, consts: [[1, \"row\", \"align-items-center\", 2, \"border-bottom\", \"1px solid black\"], [1, \"col-4\"], [\"alt\", \"John\", 1, \"w-75\", 3, \"src\"], [\"id\", \"Mypdfuser\", 1, \"col-6\"], [1, \"w-25\", \"mx-auto\", \"user\", 3, \"formGroup\"], [1, \"form-group\"], [\"formControlName\", \"badge\"], [\"value\", \"Parent\"], [\"selected\", \"\", \"value\", \"Medecin\"], [1, \"col-2\"], [1, \"btn\", \"btn-danger\", \"my-2\", \"btn-user\", 3, \"disabled\", \"click\"], [1, \"btn\", \"btn-warning\", \"my-2\", \"btn-user\", 3, \"disabled\", \"click\"], [1, \"col-md-4\", \"text-right\"], [1, \"btn\", \"btn-success\", \"btn-block\", 3, \"click\"]], template: function UserComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\r\n        i0.ɵɵelement(2, \"img\", 2);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(3, \"div\", 3)(4, \"h4\");\r\n        i0.ɵɵtext(5);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(6, \"h4\");\r\n        i0.ɵɵtext(7);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(8, \"h4\");\r\n        i0.ɵɵtext(9);\r\n        i0.ɵɵpipe(10, \"date\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(11, \"h4\");\r\n        i0.ɵɵtext(12);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(13, \"h4\");\r\n        i0.ɵɵtext(14);\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(15, \"form\", 4)(16, \"div\", 5)(17, \"label\");\r\n        i0.ɵɵtext(18, \"Badge\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(19, \"select\", 6)(20, \"option\", 7);\r\n        i0.ɵɵtext(21, \"Parent\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(22, \"option\", 8);\r\n        i0.ɵɵtext(23, \"M\\u00E9decin\");\r\n        i0.ɵɵelementEnd()()();\r\n        i0.ɵɵelementStart(24, \"div\", 9)(25, \"button\", 10);\r\n        i0.ɵɵlistener(\"click\", function UserComponent_Template_button_click_25_listener() { return ctx.notifyParent(); });\r\n        i0.ɵɵtext(26, \"Supprimer\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(27, \"div\", 9)(28, \"button\", 11);\r\n        i0.ɵɵlistener(\"click\", function UserComponent_Template_button_click_28_listener() { return ctx.updateRoleUser(ctx.userForm); });\r\n        i0.ɵɵtext(29, \"Modfier Role\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(30, \"div\", 12)(31, \"button\", 13);\r\n        i0.ɵɵlistener(\"click\", function UserComponent_Template_button_click_31_listener() { return ctx.openPDF(); });\r\n        i0.ɵɵtext(32, \"Download PDF\");\r\n        i0.ɵɵelementEnd()()()();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵpropertyInterpolate1(\"src\", \"assets/img/UserPictures/\", ctx.user.urlpicture, \"\", i0.ɵɵsanitizeUrl);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵtextInterpolate1(\"Nom : \", ctx.user.nom, \"\");\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵtextInterpolate1(\"Prenom : \", ctx.user.prenom, \"\");\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵtextInterpolate1(\"Date de naissance : \", i0.ɵɵpipeBind1(10, 9, ctx.user.dateNaissance), \"\");\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵtextInterpolate1(\"Email : \", ctx.user.email, \"\");\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵtextInterpolate1(\"Badge : \", ctx.user.badge, \"\");\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"formGroup\", ctx.userForm);\r\n        i0.ɵɵadvance(10);\r\n        i0.ɵɵproperty(\"disabled\", ctx.user.badge === \"Moderateur\");\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"disabled\", ctx.user.badge === \"Moderateur\");\r\n    } }, directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.FormControlName, i3.NgSelectOption, i3.ɵNgSelectMultipleOption], pipes: [i4.DatePipe], styles: [\".btn-user[_ngcontent-%COMP%] {\\n    font-size: 0.8rem;\\n    border-radius: 10rem;\\n    padding: 0.75rem 1rem;\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGlCQUFpQjtJQUNqQixvQkFBb0I7SUFDcEIscUJBQXFCO0VBQ3ZCIiwiZmlsZSI6InVzZXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5idG4tdXNlciB7XG4gICAgZm9udC1zaXplOiAwLjhyZW07XG4gICAgYm9yZGVyLXJhZGl1czogMTByZW07XG4gICAgcGFkZGluZzogMC43NXJlbSAxcmVtO1xuICB9Il19 */\"] });\r\n"]},"metadata":{},"sourceType":"module"}